{"version":3,"sources":["api/images.js","components/ModalWindow/ModalWindow.jsx","App.jsx","index.js"],"names":["BASE_URL","getComments","imageId","fetch","then","response","json","ModalWindow","setOpen","currentId","currentImg","useState","name","setName","newComment","setNewComment","commentsList","setCommentsList","useEffect","data","console","log","handleCommentAdd","description","method","body","JSON","stringify","image_id","addComment","className","alt","src","onSubmit","event","preventDefault","type","value","placeholder","onChange","target","trimLeft","required","autoComplete","map","item","onClick","App","imagesList","setImagesList","open","setCurrentImg","setCurrentId","length","CircularProgress","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.17d0e5a9.chunk.js","sourcesContent":["const BASE_URL = 'https://tzfrontend.herokuapp.com';\n\nexport const getImagesList = () => {\n  return fetch(`${BASE_URL}/images/`)\n    .then(response => response.json())\n}\n\nexport const getImage = (imageId) => {\n  return fetch(`${BASE_URL}/images/${imageId}`)\n    .then(response => response.json())\n}\n\n\nexport const getComments = (imageId) => {\n  return fetch(`${BASE_URL}/comments/${imageId}`)\n    .then(response => response.json())\n}\n\nexport function addComment(name, description, imageId) {\n  return fetch(`${BASE_URL}/comments/add`, {\n    method: 'POST',\n    body: JSON.stringify({\n      name,\n      description,\n      image_id: imageId\n    }),\n  });\n}","import React, { useEffect, useState } from 'react';\nimport { getImage } from '../../api/images';\nimport { addComment, getComments } from '../../api/images';\nimport \"./ModalWindow.css\";\n\n\nexport const ModalWindow = ({setOpen, currentId, currentImg}) => {\n  const [name, setName] = useState('');\n  const [newComment, setNewComment] = useState('');\n  const [commentsList, setCommentsList] = useState([]);\n \n  useEffect(() => {\n    getImage(currentId);\n    getComments(currentId)\n      .then((data) => {\n        console.log(data)\n        setCommentsList(data)\n      })\n  }, []);\n\n  const handleCommentAdd = (name, description, currentId) => {\n    addComment(name, description, currentId)\n      .then(() => {\n        getComments(currentId)\n          .then((data) => {\n            console.log(data);\n            setCommentsList(data);\n          })\n      });\n    setName('');\n    setNewComment('');\n  };\n\n  return (\n    <div className=\"modal-window\">\n      <div className=\"left\">\n        <img\n          alt=\"nature\"\n          src={currentImg}\n          className=\"modal-window__img\"\n        />\n        <form\n          className=\"comment-form\"\n          onSubmit={(event) => {\n            event.preventDefault();\n            handleCommentAdd(name, newComment, currentId);\n          }}\n        >\n          <div className=\"form-field\">\n            <input\n              type=\"text\"\n              value={name}\n              name=\"name\"\n              placeholder=\"Ваше имя\"\n              className=\"comment-form__input\"\n              onChange={event => setName(event.target.value.trimLeft())}\n              required\n              autoComplete=\"off\"\n            />\n          </div>\n          <div className=\"form-field\">\n            <textarea\n              name=\"comment\"\n              value={newComment}\n              placeholder=\"Ваш комментарий\"\n              className=\"comment-form__input\"\n              onChange={event => setNewComment(event.target.value.trimLeft())}\n              required\n            />\n          </div>\n          <button\n            type=\"submit\"\n            className=\"comment-form__submit-button\"\n          >\n            Оставить комментарий\n          </button>\n        </form>\n      </div>\n      <div className=\"right\">\n          <ul className=\"comments__list\">\n            {commentsList.map(item => (\n              <li key={item.image_id} className=\"comments__item\">\n                {item.description}\n              </li>\n            ))}\n          </ul>\n      </div>\n      <button\n        type=\"button\"\n        onClick={() => {\n          setOpen(false);\n        }}\n        className=\"cross-button\"\n      />\n    </div>\n  )\n}","import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { getImagesList } from './api/images.js';\nimport { ModalWindow } from './components/ModalWindow/ModalWindow';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\n\nfunction App() {\n  const [imagesList, setImagesList] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [currentImg, setCurrentImg] = useState('');\n  const [currentId, setCurrentId] = useState(0);\n\n  useEffect(() => {\n    getImagesList()\n      .then(setImagesList)\n  }, []);\n\n  return (\n    <>\n    \n    <div className=\"app\">\n    \n      <header className=\"header\">\n        <h1 className=\"header__title\">Test App</h1>\n      </header>\n      {imagesList.length === 0 &&\n        <CircularProgress />\n      }\n      <div>\n        {imagesList &&\n          <ul className=\"gallery-list\">\n            {imagesList.map(item => (\n              <li key={item.image_id} className=\"gallery-list__item\">\n                <img\n                  alt=\"nature\"\n                  src={item.src}\n                  onClick={() => {\n                    setCurrentImg(item.src);\n                    setOpen(true);\n                    setCurrentId(item.image_id);\n                  }}\n                  className=\"gallery-list__image\"\n                />\n              </li>\n            ))}\n          </ul>\n        }\n        {open &&\n          <ModalWindow\n            setOpen={setOpen}\n            currentId={currentId}\n            currentImg={currentImg}\n          />\n        }\n        \n      </div>\n      <footer className=\"footer\">\n        <h2>&#169; 2018-2019</h2>\n      </footer>\n    </div>\n    \n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App.jsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}